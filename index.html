<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Fabrizio Petrozzi</title>
  <!-- Icon Classes -->
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <!-- Google Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap">
  <!-- External CSS -->
  <link rel="stylesheet" href="style.css" />
  <!-- Pre-load projects -->
  <link rel="prefetch" href="project1.html" as="document">
  <link rel="prefetch" href="project2.html" as="document">
  <link rel="prefetch" href="project3.html" as="document">
  <link rel="prefetch" href="project4.html" as="document">
</head>
<body>
  <!-- Header and Navigation -->
  <header class="common-header">
    <div class="header-left">
      <button class="logo" onclick="window.location.reload();">FP</button>
    </div>
    <div class="header-center">
      <nav class="main-nav">
        <a href="#about"><span>About</span></a>
        <a href="#featured"><span>Featured</span></a>
        <a href="#projects"><span>Projects</span></a>
        <a href="#" id="contactLink"><span>Contact</span></a>
      </nav>
    </div>
    <div class="header-right">
      <button id="menuToggle" aria-label="Project Menu">
        <i class="bx bx-menu"></i>
      </button>
    </div>
  </header>

  <!-- Main -->
  <main class="main-content">
    <!-- Main Content -->
    <div class="container">
      <!-- About Section -->
      <section id="about">
        <!-- Dark mode toggle -->
        <div class="dark-mode-toggle">
          <input type="checkbox" id="darkModeToggle" class="dark-mode-toggle-input">
          <label for="darkModeToggle" class="dark-mode-toggle-label">
            <span class="toggle-slider">
              <span class="icon sun-icon">
                <ion-icon name="sunny"></ion-icon>
              </span>
              <span class="icon moon-icon">
                <ion-icon name="moon"></ion-icon>
              </span>
            </span>
          </label>
        </div>
        <div class="social-links">
          <a href="https://www.linkedin.com/in/fabriziopetrozzi/" target="_blank" aria-label="LinkedIn">
            <i class="bx bxl-linkedin"></i>
          </a>
          <a href="files/Resume.pdf" target="_blank" aria-label="Resume">
            <i class="bx bx-file"></i>
          </a>
          <a href="https://usfbusiness.com/2023/03/29/fabrizio-petrozzi-yanez-business-management/" target="_blank" aria-label="25 Under 25 Award">
            <i class="bx bx-trophy"></i>
          </a>
        </div>
        <h1>About Me</h1>
        <img src="images/headshot.jpeg" alt="My Photo" class="profile-pic">
        <p>
          Hey! I'm <span class="highlight-name">Fabrizio Petrozzi</span>, 
          a Master of Science student in Artificial Intelligence and 
          Business Analytics at the University of South Florida. I have experience analyzing 
          high-value client accounts, supporting over 680 students as a Graduate Teaching 
          Assistant, and building data-driven projects with a strong 
          focus on data analytics and predictive modeling.
        </p>
      </section>

      <!-- Featured Section -->
      <section id="featured">
        <h2>Featured Projects</h2>
        <div class="projects-grid">
          <div class="project-item">
            <a href="project1.html">
              <img src="images/HTML.jpg" alt="Building My Digital Presence" />
              <h3>Building My Digital Presence</h3>
            </a>
          </div>
          <div class="project-item">
            <a href="project2.html">
              <img src="images/lorem ipsum.jpg" alt="Lorem ipsum" />
              <h3>Lorem ipsum</h3>
            </a>
          </div>
          <div class="project-item">
            <a href="project3.html">
              <img src="images/lorem ipsum.jpg" alt="Lorem ipsum" />
              <h3>Lorem ipsum</h3>
            </a>
          </div>
        </div>
      </section>

      <!-- Projects Section -->
      <section id="projects">
        <h2>Other Projects</h2>
        <div class="projects-grid">
          <div class="project-item">
            <a href="project4.html">
              <img src="images/lorem ipsum.jpg" alt="Lorem ipsum" />
              <h3>Lorem ipsum</h3>
            </a>
          </div>
        </div>
      </section>
    </div>
    
    <!-- Sliding Sidebar for Project Navigation -->
    <div id="projectSidebar" class="sidebar">
      <div class="sidebar-header">
        <h2>Projects</h2>
        <button id="closeSidebar" aria-label="Close Menu">
          <i class="bx bx-x"></i>
        </button>
      </div>
      <!-- Filter Toolbar -->
      <div class="sidebar-filter">
        <button class="filter-btn" data-filter="featured">Featured</button>
        <button class="filter-btn" data-filter="other">Other</button>
        <button class="filter-btn" data-filter="all">All</button>
      </div>
      <div class="sidebar-content">
        <h3 class="sidebar-section-title featured-title">Featured</h3>
        <ul class="sidebar-list featured-list">
          <li>
            <a href="project1.html">
              <img src="images/HTML-Thumb.jpg" alt="Project 1 Thumbnail">
              <span>Building My Digital Presence</span>
            </a>
          </li>
          <li>
            <a href="project2.html">
              <img src="images/project2-thumb.jpg" alt="Project 2 Thumbnail">
              <span>MongoDB Business Use Case</span>
            </a>
          </li>
          <li>
            <a href="project3.html">
              <img src="images/project3-thumb.jpg" alt="Project 3 Thumbnail">
              <span>Titanic Survival Prediction</span>
            </a>
          </li>
        </ul>
        <h3 class="sidebar-section-title other-title">Other Projects</h3>
        <ul class="sidebar-list other-list">
          <li>
            <a href="project4.html">
              <img src="images/project4-thumb.jpg" alt="Project 4 Thumbnail">
              <span>Multiple Regression Analysis</span>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </main>
  
  <!-- Footer -->
  <footer>
    <p>&copy; <span id="year"></span> Fabrizio Petrozzi. All rights reserved.</p>
  </footer>
  
  <!-- Contact Modal -->
  <div id="contactModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Contact Me</h2>
      <p>
        Feel free to reach out to me via email at 
        <a href="mailto:petrozzi@usf.edu">petrozzi@usf.edu</a>.
      </p>
    </div>
  </div>
  
  <!-- Scripts -->
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <script src="darkmode.js"></script>
  
  <!-- Main Page Scripts -->
  <script>
    // Auto-update the footer year
    document.getElementById("year").textContent = new Date().getFullYear();
    
    // Contact Modal Functionality
    const modal = document.getElementById("contactModal");
    const contactLink = document.getElementById("contactLink");
    const closeBtn = document.getElementsByClassName("close")[0];
    
    contactLink.addEventListener("click", function(e) {
      e.preventDefault();
      modal.style.display = "block";
    });
    
    closeBtn.addEventListener("click", function() {
      modal.style.display = "none";
    });
    
    window.addEventListener("click", function(e) {
      if (e.target === modal) {
        modal.style.display = "none";
      }
    });
    
    // Sidebar Functionality
    document.addEventListener('DOMContentLoaded', function() {
      const menuToggle = document.getElementById('menuToggle');
      const closeSidebar = document.getElementById('closeSidebar');
      const projectSidebar = document.getElementById('projectSidebar');

      // Toggle the sidebar when the menu icon is clicked
      menuToggle.addEventListener('click', function() {
        projectSidebar.classList.add('active');
      });

      // Close the sidebar when the close button is clicked
      closeSidebar.addEventListener('click', function() {
        projectSidebar.classList.remove('active');
      });

      // Close the sidebar if the user clicks outside of it
      document.addEventListener('click', function(e) {
        if (!projectSidebar.contains(e.target) && !menuToggle.contains(e.target)) {
          projectSidebar.classList.remove('active');
        }
      });
      
      // Filter buttons functionality
      const filterButtons = document.querySelectorAll('.filter-btn');
      const featuredList = document.querySelector('.featured-list');
      const otherList = document.querySelector('.other-list');
      const featuredTitle = document.querySelector('.featured-title');
      const otherTitle = document.querySelector('.other-title');

      filterButtons.forEach(btn => {
        btn.addEventListener('click', function() {
          // Remove active class from all filter buttons
          filterButtons.forEach(b => b.classList.remove('active'));
          // Add active class to the clicked button
          btn.classList.add('active');

          const filter = btn.getAttribute('data-filter');

          if (filter === 'featured') {
            featuredList.style.display = 'block';
            featuredTitle.style.display = 'block';
            otherList.style.display = 'none';
            otherTitle.style.display = 'none';
          } else if (filter === 'other') {
            featuredList.style.display = 'none';
            featuredTitle.style.display = 'none';
            otherList.style.display = 'block';
            otherTitle.style.display = 'block';
          } else if (filter === 'all') {
            featuredList.style.display = 'block';
            featuredTitle.style.display = 'block';
            otherList.style.display = 'block';
            otherTitle.style.display = 'block';
          }
        });
      });

      // Set default filter
      document.querySelector('.filter-btn[data-filter="all"]').click();
    });
    
    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function(e) {
        if (this.getAttribute("href") === "#") return; // Skip for "#" only links (like contact)
        
        e.preventDefault();
        const target = document.querySelector(this.getAttribute("href"));
        if(target){
          target.scrollIntoView({
            behavior: "smooth"
          });
        }
      });
    });
    
    // Section & Project animations with Intersection Observer
    document.addEventListener('DOMContentLoaded', function() {
      // Get viewport width
      const width = window.innerWidth;
      
      // Section observer options - Activate earlier for mobile users
      const sectionObserverOptions = width <= 900 ? 
        { threshold: 0.01, rootMargin: "0px 0px -10% 0px" } : // Mobile settings - earlier activation
        { threshold: 0.08, rootMargin: "0px 0px -20% 0px" };   // Desktop settings
      
      // Apply observer to sections
      const sections = document.querySelectorAll('section');
      const sectionObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('active'); 
            observer.unobserve(entry.target);
          }
        });
      }, sectionObserverOptions);
      
      sections.forEach(section => {
        sectionObserver.observe(section);
      });
      
      // Project items observer setup
      let projectObserverOptions;
      let featuredBehavior;
      
      // Adjust settings based on screen size
      if (width <= 600) {
        // Mobile: activate elements earlier
        projectObserverOptions = {
          threshold: 0.01,
          rootMargin: "0px 0px -10% 0px"
        };
        featuredBehavior = 'individual';
      } else if (width <= 800) {
        projectObserverOptions = {
          threshold: 0.05,
          rootMargin: "0px 0px 0% 0px"
        };
        featuredBehavior = 'individual';
      } else {
        projectObserverOptions = {
          threshold: 0.12,
          rootMargin: "0px 0px -35% 0px"
        };
        featuredBehavior = 'grouped';
      }
      
      // Featured Projects
      const featuredItems = document.querySelectorAll('#featured .project-item');
      if (featuredBehavior === 'individual') {
        // Observe each featured item individually
        const featuredObserver = new IntersectionObserver((entries, observer) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('active');
              observer.unobserve(entry.target);
            }
          });
        }, projectObserverOptions);
        
        featuredItems.forEach(item => {
          featuredObserver.observe(item);
        });
      } else {
        // On larger screens, animate all featured items together
        const featuredObserver = new IntersectionObserver((entries, observer) => {
          if (entries.some(entry => entry.isIntersecting)) {
            featuredItems.forEach(item => {
              item.classList.add('active');
            });
            observer.disconnect();
          }
        }, projectObserverOptions);
        
        if (featuredItems.length > 0) {
          featuredObserver.observe(document.querySelector('#featured'));
        }
      }
      
      // Other Projects: trigger each individually
      const otherProjectItems = document.querySelectorAll('#projects .project-item');
      const otherObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('active');
            observer.unobserve(entry.target);
          }
        });
      }, projectObserverOptions);
      
      otherProjectItems.forEach(item => {
        otherObserver.observe(item);
      });
    });
  </script>
</body>
</html>
